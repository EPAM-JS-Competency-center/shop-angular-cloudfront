@if (loaded()) {
  <mat-card>
    <h1 class="text-center pt-4" mat-card-title>
      {{ productId() ? "Edit product" : "Create new product" }}
    </h1>

    <mat-card-content>
      <form class="row" [formGroup]="form">
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label>Title</mat-label>
            <input matInput formControlName="title" />
            @if (titleCtrl.touched && titleCtrl.hasError("required")) {
              <mat-error> Product title is required </mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description"></textarea>
            @if (
              descriptionCtrl.touched && descriptionCtrl.hasError("required")
            ) {
              <mat-error> Product description is required </mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col col-md-6">
          <mat-form-field class="w-100">
            <mat-label>Price ($)</mat-label>
            <input type="number" matInput formControlName="price" />
            @if (priceCtrl.touched && priceCtrl.hasError("required")) {
              <mat-error> Product price is required </mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col col-md-6">
          <mat-form-field class="w-100">
            <mat-label>Count</mat-label>
            <input type="number" matInput formControlName="count" />
            @if (countCtrl.touched && countCtrl.hasError("required")) {
              <mat-error> Product count is required </mat-error>
            }
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>

    <mat-card-actions>
      <button class="text-uppercase mr-2" mat-flat-button routerLink="..">
        cancel
      </button>
      <button
        class="text-uppercase"
        color="primary"
        mat-flat-button
        [disabled]="form.invalid || requestInProgress"
        (click)="editProduct()"
      >
        save product
      </button>
    </mat-card-actions>
  </mat-card>
} @else {
  <div class="py-5">
    <mat-spinner [diameter]="40" class="mx-auto"></mat-spinner>
  </div>
}
